{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/WORK/youtube-post/front/src/features/login/login.server.ts"],"sourcesContent":["'use server';\r\nimport { cookies } from 'next/headers';\r\nimport { redirect } from 'next/navigation';\r\n\r\nexport async function login(formData: FormData): Promise<{ success: boolean, message?: string }> {\r\n  const email = formData.get('email');\r\n  const password = formData.get('password');\r\n  const remember = formData.get('remember') === 'on'; // 'on'/null → true/false\r\n\r\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/auth/login`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ email, password, remember }),\r\n  });\r\n  const json = await res.json();\r\n\r\n  if (res.status >= 500) {\r\n    throw new Error('Failed to Login');\r\n  }\r\n\r\n  if (!res.ok) {\r\n    let message = json.message;\r\n\r\n    // DTOが配列でメッセージを返す\r\n    if (Array.isArray(message)) {\r\n      message = message.join('、');\r\n    }\r\n\r\n    return { success: false, message };\r\n  }\r\n\r\n  // cookieを取得\r\n  const cookieStore = await cookies();\r\n  // cookieにJWTを設定(name, value, options)\r\n  cookieStore.set('token', json.access_token, {\r\n    httpOnly: true,\r\n    // チェックあり→30日（バックと同じ）\r\n    // チェックなし→セッションcookie（ブラウザ閉じたら消える）\r\n    maxAge: remember ? 60 * 60 * 24 * 30 : undefined,\r\n  });\r\n\r\n  return { success: true };\r\n}\r\n\r\nexport async function logout() {\r\n  const cookieStore = await cookies();\r\n\r\n  cookieStore.delete('token');\r\n\r\n  redirect('/videos?success=3');\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAIsB,QAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/WORK/youtube-post/front/src/features/users/user.server.ts"],"sourcesContent":["'use server';\r\nimport { fetchWithToken } from '@/utils/fetchWithToken';\r\nimport { MyPageResponse, MyPostsResponse  } from './user.type';\r\n\r\nexport async function createUser(formData: FormData) {\r\n  const name = formData.get('name');\r\n  const email = formData.get('email');\r\n  const password = formData.get('password');\r\n  const passwordConfirm = formData.get('passwordConfirm');\r\n\r\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/users`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ name, email, password, passwordConfirm }),\r\n  });\r\n  const json = await res.json();\r\n\r\n  if (res.status >= 500) {\r\n    throw new Error('Failed to Create User');\r\n  }\r\n\r\n  if (!res.ok) {\r\n    let message = json.message;\r\n\r\n    // DTOが配列でメッセージを返す\r\n    if (Array.isArray(message)) {\r\n      message = message.join('、');\r\n    }\r\n\r\n    return { success: false, message };\r\n  }\r\n\r\n  return json;\r\n}\r\n\r\nexport async function fetchMyPosts(): Promise<MyPostsResponse> {\r\n  const res = await fetchWithToken(`${process.env.NEXT_PUBLIC_API_URL}/users/me`);\r\n\r\n  if (!res.ok) {\r\n    throw new Error('Failed to Fetch User');\r\n  }\r\n\r\n  return res.json();\r\n}\r\n\r\nexport async function fetchMyPage(): Promise<MyPageResponse> {\r\n  const res = await fetchWithToken(`${process.env.NEXT_PUBLIC_API_URL}/users/mypage`);\r\n\r\n  if (!res.ok) {\r\n    throw new Error('Failed to Fetch User');\r\n  }\r\n\r\n  return res.json();\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAIsB,aAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/WORK/youtube-post/front/src/features/users/components/CreateForm.tsx"],"sourcesContent":["'use client';\r\nimport { login } from '@/features/login/login.server';\r\nimport { createUser } from '@/features/users/user.server';\r\nimport { redirect } from 'next/navigation';\r\nimport { useState } from 'react';\r\n\r\nexport default function CreateForm() {\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [passwordConfirm, setPasswordConfirm] = useState('');\r\n  const [message, setMessage] = useState('');\r\n\r\n  return (\r\n    <div className=\"bg-gray-100 min-h-screen flex flex-col items-center pt-12 px-4\">\r\n      <div className=\"bg-white p-10 rounded-lg shadow-lg w-full max-w-xl\">\r\n        <h2 className=\"text-2xl font-medium mb-6 text-center text-gray-800\">ユーザー登録</h2>\r\n        {message && (\r\n          <p className=\"bg-red-100 text-red-700 p-4 rounded-md mb-4 text-sm\">{message}</p>\r\n        )}\r\n        <form\r\n          // Server Actions\r\n          action={async (formData: FormData) => {\r\n            const createResult = await createUser(formData);\r\n            if (!createResult.success) return setMessage(createResult.message);\r\n\r\n            // rememberなしでそのままログインする\r\n            const loginResult = await login(formData);\r\n            if (!loginResult.success) return setMessage(loginResult.message);\r\n\r\n            redirect('/videos?success=1');\r\n          }}\r\n        >\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">ユーザーネーム</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            placeholder=\"\"\r\n            required\r\n            value={name}\r\n            onChange={(e) => {\r\n              setName(e.target.value);\r\n            }}\r\n            className=\"mt-1 w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm mb-4\"\r\n          />\r\n\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">メールアドレス</label>\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            placeholder=\"your@example.com\"\r\n            required\r\n            value={email}\r\n            onChange={(e) => {\r\n              setEmail(e.target.value);\r\n            }}\r\n            className=\"mt-1 w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm mb-4\"\r\n          />\r\n\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">パスワード</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder=\"••••••\"\r\n            required\r\n            value={password}\r\n            onChange={(e) => {\r\n              setPassword(e.target.value);\r\n            }}\r\n            className=\"mt-1 w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm mb-4\"\r\n          />\r\n\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">パスワード確認</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"passwordConfirm\"\r\n            placeholder=\"••••••\"\r\n            required\r\n            value={passwordConfirm}\r\n            onChange={(e) => {\r\n              setPasswordConfirm(e.target.value);\r\n            }}\r\n            className=\"mt-1 w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm mb-8\"\r\n          />\r\n\r\n          <button className=\"w-full bg-sky-500 text-white py-2 px-4 rounded-md shadow hover:bg-sky-600 transition\">\r\n            登録\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;;;AAJA;;;;;AAMe,SAAS;;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAsD;;;;;;gBACnE,yBACC,6LAAC;oBAAE,WAAU;8BAAuD;;;;;;8BAEtE,6LAAC;oBACC,iBAAiB;oBACjB,QAAQ,OAAO;wBACb,MAAM,eAAe,MAAM,IAAA,iLAAU,EAAC;wBACtC,IAAI,CAAC,aAAa,OAAO,EAAE,OAAO,WAAW,aAAa,OAAO;wBAEjE,wBAAwB;wBACxB,MAAM,cAAc,MAAM,IAAA,4KAAK,EAAC;wBAChC,IAAI,CAAC,YAAY,OAAO,EAAE,OAAO,WAAW,YAAY,OAAO;wBAE/D,IAAA,iJAAQ,EAAC;oBACX;;sCAEA,6LAAC;4BAAM,WAAU;sCAA+C;;;;;;sCAChE,6LAAC;4BACC,MAAK;4BACL,MAAK;4BACL,aAAY;4BACZ,QAAQ;4BACR,OAAO;4BACP,UAAU,CAAC;gCACT,QAAQ,EAAE,MAAM,CAAC,KAAK;4BACxB;4BACA,WAAU;;;;;;sCAGZ,6LAAC;4BAAM,WAAU;sCAA+C;;;;;;sCAChE,6LAAC;4BACC,MAAK;4BACL,MAAK;4BACL,aAAY;4BACZ,QAAQ;4BACR,OAAO;4BACP,UAAU,CAAC;gCACT,SAAS,EAAE,MAAM,CAAC,KAAK;4BACzB;4BACA,WAAU;;;;;;sCAGZ,6LAAC;4BAAM,WAAU;sCAA+C;;;;;;sCAChE,6LAAC;4BACC,MAAK;4BACL,MAAK;4BACL,aAAY;4BACZ,QAAQ;4BACR,OAAO;4BACP,UAAU,CAAC;gCACT,YAAY,EAAE,MAAM,CAAC,KAAK;4BAC5B;4BACA,WAAU;;;;;;sCAGZ,6LAAC;4BAAM,WAAU;sCAA+C;;;;;;sCAChE,6LAAC;4BACC,MAAK;4BACL,MAAK;4BACL,aAAY;4BACZ,QAAQ;4BACR,OAAO;4BACP,UAAU,CAAC;gCACT,mBAAmB,EAAE,MAAM,CAAC,KAAK;4BACnC;4BACA,WAAU;;;;;;sCAGZ,6LAAC;4BAAO,WAAU;sCAAuF;;;;;;;;;;;;;;;;;;;;;;;AAOnH;GAtFwB;KAAA"}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/WORK/youtube-post/front/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts"],"sourcesContent":["// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n"],"names":["callServer","createServerReference","findSourceMapURL"],"mappings":"AAAA,gFAAgF;AAChF,0BAA0B;;;;;;;;;;;;;;;;IAEjBA,UAAU,EAAA;eAAVA,eAAAA,UAAU;;IAMVC,qBAAqB,EAAA;eAArBA,QAAAA,qBAAqB;;IALrBC,gBAAgB,EAAA;eAAhBA,qBAAAA,gBAAgB;;;+BADE;qCACM;wBAKK","ignoreList":[0]}}]
}