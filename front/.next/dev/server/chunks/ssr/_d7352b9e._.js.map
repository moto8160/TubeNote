{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/WORK/youtube-post/front/src/app/posts/create/page.tsx"],"sourcesContent":["'use client';\r\nimport { createPost, fetchOEmbed } from '@/features/posts/post.server';\r\nimport { YoutubeOEmbedResponse } from '@/features/videos/video.type';\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport default function PostsPage() {\r\n  const [url, setUrl] = useState('');\r\n  const [text, setText] = useState('');\r\n  const [video, setVideo] = useState<YoutubeOEmbedResponse | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // URLの入力値が変わる毎にフェッチ（500msでデバウンス）\r\n  useEffect(() => {\r\n    // コールバック関数;\r\n    if (!url) return;\r\n    const timer = setTimeout(async () => {\r\n      try {\r\n        const video = await fetchOEmbed(url);\r\n        setVideo(video);\r\n        setError(null);\r\n      } catch (e) {\r\n        if (e instanceof Error) {\r\n          setError(e.message);\r\n          setVideo(null);\r\n        } else {\r\n          setError('エラーが発生しました');\r\n        }\r\n      }\r\n    }, 500);\r\n\r\n    // クリーンアップ関数\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [url]); //トリガー配列\r\n\r\n  const handleSubmit = async (formData: FormData) => {\r\n    try {\r\n      await createPost(formData);\r\n      setError('登録成功'); //後でリダイレクトに変更\r\n    } catch (e) {\r\n      if (e instanceof Error) {\r\n        setError(e.message);\r\n      } else {\r\n        setError('エラーが発生しました');\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-xl mx-auto bg-white rounded-2xl shadow p-6 space-y-5\">\r\n      {/* タイトル */}\r\n      <h1 className=\"text-xl font-semibold text-center\">動画を投稿</h1>\r\n\r\n      {/* URL入力 */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium mb-1\">YouTube URL</label>\r\n        <input\r\n          placeholder=\"https://www.youtube.com/watch?v=xxxxxxxx\"\r\n          className=\"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        />\r\n        <p className=\"text-xs text-gray-500 mt-1\">URLを入力すると自動でプレビューされます</p>\r\n      </div>\r\n\r\n      {/* プレビュー */}\r\n      <div className=\"border rounded-lg p-3 space-y-2 bg-gray-50\">\r\n        <div className=\"w-full aspect-video bg-black rounded-md flex items-center justify-center text-white text-sm\">\r\n          YouTube Preview\r\n        </div>\r\n        <p className=\"font-medium\">未経験・1年目のWebエンジニアの必須スキル20選</p>\r\n        <p className=\"text-sm text-gray-500\">エンジニア転職チャンネル【RUNTEQ公式】</p>\r\n      </div>\r\n\r\n      {/* コメント */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium mb-1\">コメント</label>\r\n        <textarea\r\n          rows={3}\r\n          placeholder=\"この動画の学びや感想を書く\"\r\n          className=\"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        />\r\n      </div>\r\n\r\n      {/* エラーメッセージ（例） */}\r\n      <p className=\"text-sm text-center text-red-600\">※ 無効なURLです</p>\r\n\r\n      {/* 投稿ボタン */}\r\n      <button className=\"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-medium transition\">\r\n        投稿する\r\n      </button>\r\n    </div>\r\n\r\n    // <div className=\"max-w-7xl mx-auto\">\r\n    //   <div>\r\n    //     <form action={handleSubmit} className=\"flex flex-col space-y-5\">\r\n    //       <input\r\n    //         name=\"url\"\r\n    //         value={url}\r\n    //         onChange={(e) => {\r\n    //           setUrl(e.target.value);\r\n    //         }}\r\n    //         className=\"bg-gray-300\"\r\n    //       ></input>\r\n    //       <input name=\"text\" className=\"bg-gray-300\" />\r\n    //       {video && (\r\n    //         <div>\r\n    //           <h2>{video.title}</h2>\r\n    //           <h2>{video.author_name}</h2>\r\n    //           <img src={video.thumbnail_url} />\r\n    //         </div>\r\n    //       )}\r\n    //       <button>投稿</button>\r\n    //     </form>\r\n    //   </div>\r\n    //   {error && <h2>{error}</h2>}\r\n    //   {/* <h2>aaaaaa</h2> */}\r\n    // </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAGA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAC;IAC/B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAA+B;IACjE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,iCAAiC;IACjC,IAAA,kNAAS,EAAC;QACR,YAAY;QACZ,IAAI,CAAC,KAAK;QACV,MAAM,QAAQ,WAAW;YACvB,IAAI;gBACF,MAAM,QAAQ,MAAM,YAAY;gBAChC,SAAS;gBACT,SAAS;YACX,EAAE,OAAO,GAAG;gBACV,IAAI,aAAa,OAAO;oBACtB,SAAS,EAAE,OAAO;oBAClB,SAAS;gBACX,OAAO;oBACL,SAAS;gBACX;YACF;QACF,GAAG;QAEH,YAAY;QACZ,OAAO;YACL,aAAa;QACf;IACF,GAAG;QAAC;KAAI,GAAG,QAAQ;IAEnB,MAAM,eAAe,OAAO;QAC1B,IAAI;YACF,MAAM,WAAW;YACjB,SAAS,SAAS,aAAa;QACjC,EAAE,OAAO,GAAG;YACV,IAAI,aAAa,OAAO;gBACtB,SAAS,EAAE,OAAO;YACpB,OAAO;gBACL,SAAS;YACX;QACF;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAG,WAAU;0BAAoC;;;;;;0BAGlD,8OAAC;;kCACC,8OAAC;wBAAM,WAAU;kCAAiC;;;;;;kCAClD,8OAAC;wBACC,aAAY;wBACZ,WAAU;;;;;;kCAEZ,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;0BAI5C,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAA8F;;;;;;kCAG7G,8OAAC;wBAAE,WAAU;kCAAc;;;;;;kCAC3B,8OAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;0BAIvC,8OAAC;;kCACC,8OAAC;wBAAM,WAAU;kCAAiC;;;;;;kCAClD,8OAAC;wBACC,MAAM;wBACN,aAAY;wBACZ,WAAU;;;;;;;;;;;;0BAKd,8OAAC;gBAAE,WAAU;0BAAmC;;;;;;0BAGhD,8OAAC;gBAAO,WAAU;0BAAyF;;;;;;;;;;;;AA+BjH"}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/WORK/youtube-post/front/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}